# AI 数据库监控系统 - 配置说明

## 📋 配置文件概览

本系统使用单一配置文件 `.env` 管理所有配置项。

### `.env` - 统一配置文件

**位置**：`.env`（与 `AIDataBaseMonitor.exe` 同目录）

**作用**：配置系统的所有参数，包括：
- **Go Web 服务器配置**（端口、超时、日志）
- **Python 后端配置**（数据库、LLM、算法参数）
- **数据库连接**（MySQL、Redis）
- **LLM 配置**（OpenAI、DeepSeek、Claude）
- **算法参数**（DTW、FAISS、预测配置）
- **性能监控配置**
- **Mock 数据配置**

**修改方式**：使用文本编辑器（如 Notepad++、VS Code）直接编辑

**修改后生效**：重启 `AIDataBaseMonitor.exe` 后生效

---

## 🔧 常用配置项说明

### `.env` 配置项

#### 1️⃣ Go Web 服务器配置

```env
# Web 服务器端口（前端访问端口）
SERVER_PORT=8080                # 修改此端口可更改前端访问地址
SERVER_READ_TIMEOUT=30          # 读取超时（秒）
SERVER_WRITE_TIMEOUT=30         # 写入超时（秒）
SERVER_IDLE_TIMEOUT=120         # 空闲超时（秒）

# Python 后端配置
BACKEND_HOST=127.0.0.1          # 后端地址（建议保持 127.0.0.1）
BACKEND_PORT=8000               # 后端端口（必须与 Python 后端一致）
BACKEND_STARTUP_TIMEOUT=60      # 启动超时（秒）
BACKEND_HEALTH_CHECK_INTERVAL=5 # 健康检查间隔（秒）
BACKEND_HEALTH_CHECK_PATH=/api/v1/health
```

#### 2️⃣ 数据库配置

```env
# MySQL 数据库配置
MYSQL_HOST=xxx.xxx.xxx.xxx      # MySQL 服务器地址
MYSQL_PORT=3306                 # MySQL 端口
MYSQL_USER=xxxxxxxxxxx          # 数据库用户名
MYSQL_PASSWORD=xxxxxxxxxxx      # 数据库密码
MYSQL_DATABASE=db_prediction    # 数据库名称

# Redis 缓存配置
REDIS_HOST=xxx.xxx.xxx.xxx      # Redis 服务器地址
REDIS_PORT=6379                 # Redis 端口
REDIS_PASSWORD=xxxxxxxxxxx      # Redis 密码
REDIS_DB=0                      # Redis 数据库编号
```

#### 3️⃣ LLM 配置

```env
# LLM 提供商选择：openai、deepseek、claude
LLM_PROVIDER=deepseek

# DeepSeek 配置（推荐）
DEEPSEEK_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
DEEPSEEK_BASE_URL=https://api.deepseek.com/v1
DEEPSEEK_MODEL=deepseek-chat

# OpenAI 配置
LLM_API_KEY=test_api_key
LLM_BASE_URL=https://api.openai.com/v1
LLM_MODEL=gpt-3.5-turbo
```

#### 4️⃣ Python 日志配置

```env
DEBUG=false                     # 是否开启调试模式（关闭 Swagger 文档）
LOG_LEVEL=INFO                  # 日志级别：DEBUG, INFO, WARNING, ERROR
LOG_FILE=logs/app.log           # Python 日志文件路径
```

**说明**：
- `LOG_LEVEL` 和 `LOG_FILE` 仅控制 Python 后端的日志
- Go 程序的日志直接输出到控制台
- 日志文件保存在可执行文件目录下的 `logs/app.log`

#### 5️⃣ Mock 数据配置（测试用）

```env
# 是否启用 Mock 数据（无需连接数据库）
USE_MOCK_DATA=false             # true=使用 Mock 数据，false=使用真实数据
MOCK_DATA_SEED=42               # Mock 数据随机种子
MOCK_RESPONSE_DELAY=0.1         # Mock 响应延迟（秒）
```

#### 6️⃣ 性能监控配置

```env
ENABLE_PERFORMANCE_MONITOR=true # 是否启用性能监控
PERFORMANCE_MONITOR_WINDOW_SIZE=1000 # 滑动窗口大小
```

---

## 📝 配置修改示例

### 示例 1：修改 Web 访问端口

**需求**：将前端访问端口从 8080 改为 9000

**操作**：编辑 `.env`

```env
SERVER_PORT=9000  # 修改这里
```

**访问地址**：http://localhost:9000

---

### 示例 2：切换到 Mock 数据模式（无需数据库）

**需求**：在没有数据库的环境中测试系统

**操作**：编辑 `.env`

```env
USE_MOCK_DATA=true  # 启用 Mock 数据
```

**效果**：所有 API 返回模拟数据，无需连接 MySQL 和 Redis

---

### 示例 3：修改数据库连接

**需求**：连接到新的 MySQL 数据库

**操作**：编辑 `.env`

```env
MYSQL_HOST=192.168.1.100
MYSQL_PORT=3306
MYSQL_USER=new_user
MYSQL_PASSWORD=new_password
MYSQL_DATABASE=new_database
```

---

## ⚠️ 注意事项

1. **配置文件编码**：使用 UTF-8 编码保存配置文件
2. **重启生效**：修改配置后必须重启 `AIDataBaseMonitor.exe`
3. **端口冲突**：确保配置的端口未被其他程序占用
4. **路径分隔符**：Windows 下使用 `\` 或 `/` 均可
5. **敏感信息**：`.env` 文件包含数据库密码等敏感信息，请妥善保管

---

## 🚀 快速启动

```powershell
# 1. 修改配置文件（可选）
notepad .env

# 2. 启动程序
.\AIDataBaseMonitor.exe

# 3. 访问前端
# 浏览器打开：http://localhost:8080
```

---

## 📞 技术支持

如有配置问题，请检查：
1. `logs\app.log` - 后端日志
2. 控制台输出 - Go 服务器日志
3. 默认预测实例数量：10套，可添加作者微信号，获取更多数量实例预测
<div align="center">  
  <img src="微信二维码.jpg" width="300" height="400" style="margin-right: 20px;">
  <img src="作者公众号.jpg" width="200" height="200" style="margin-left: 20px;">
</div>
